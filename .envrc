# .envrc

# --- Project Path Exports ---
export PROJECT_ROOT=$(git rev-parse --show-toplevel 2>/dev/null)

if [[ -z "$PROJECT_ROOT" ]]; then
  echo "direnv: error: could not find git root." >&2
  exit 1
fi

export DEV="$PROJECT_ROOT/dev"
export DOCS="$PROJECT_ROOT/docs"
export TESTS="$PROJECT_ROOT/tests"

MAIN_PKG_DIR=$(find "$PROJECT_ROOT/src" -mindepth 1 -maxdepth 1 -type d | head -n 1)
if [[ -d "$MAIN_PKG_DIR" ]]; then
    export PACK="$MAIN_PKG_DIR"
fi

# --- Virtual Env Activation ---
deactivate 2>/dev/null || true
source .venv/bin/activate
